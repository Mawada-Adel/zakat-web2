!function(t,n){"function"==typeof define&&define.amd?define(["jquery"],function(e){return n(t,e)}):"object"==typeof exports?n(t,require("jquery")):n(t,t.jQuery||t.Zepto)}(this,function(t,n){"use strict";function e(t){if(y&&"none"===t.css("animation-name")&&"none"===t.css("-webkit-animation-name")&&"none"===t.css("-moz-animation-name")&&"none"===t.css("-o-animation-name")&&"none"===t.css("-ms-animation-name"))return 0;var n,e,a,i,o=t.css("animation-duration")||t.css("-webkit-animation-duration")||t.css("-moz-animation-duration")||t.css("-o-animation-duration")||t.css("-ms-animation-duration")||"0s",s=t.css("animation-delay")||t.css("-webkit-animation-delay")||t.css("-moz-animation-delay")||t.css("-o-animation-delay")||t.css("-ms-animation-delay")||"0s",r=t.css("animation-iteration-count")||t.css("-webkit-animation-iteration-count")||t.css("-moz-animation-iteration-count")||t.css("-o-animation-iteration-count")||t.css("-ms-animation-iteration-count")||"1";for(o=o.split(", "),s=s.split(", "),r=r.split(", "),i=0,e=o.length,n=Number.NEGATIVE_INFINITY;i<e;i++)a=parseFloat(o[i])*parseInt(r[i],10)+parseFloat(s[i]),a>n&&(n=a);return n}function a(){if(n(document).height()<=n(window).height())return 0;var t,e,a=document.createElement("div"),i=document.createElement("div");return a.style.visibility="hidden",a.style.width="100px",document.body.appendChild(a),t=a.offsetWidth,a.style.overflow="scroll",i.style.width="100%",a.appendChild(i),e=i.offsetWidth,a.parentNode.removeChild(a),t-e}function i(){if(!w){var t,e,i=n("html"),o=l("is-locked");i.hasClass(o)||(e=n(document.forms[0]),t=parseInt(e.css("padding-right"),10)+a(),e.css("padding-right",t+"px"),i.addClass(o))}}function o(){if(!w){var t,e,i=n("html"),o=l("is-locked");i.hasClass(o)&&(e=n(document.forms[0]),t=parseInt(e.css("padding-right"),10)-a(),e.css("padding-right",t+"px"),i.removeClass(o))}}function s(t,n,e,a){var i=l("is",n),o=[l("is",E.CLOSING),l("is",E.OPENING),l("is",E.CLOSED),l("is",E.OPENED)].join(" ");t.$bg.removeClass(o).addClass(i),t.$overlay.removeClass(o).addClass(i),t.$wrapper.removeClass(o).addClass(i),t.$modal.removeClass(o).addClass(i),t.state=n,!e&&t.$modal.trigger({type:n,reason:a},[{reason:a}])}function r(t,a,i){var o=0,s=function(t){t.target===this&&o++},r=function(t){t.target===this&&0==--o&&(n.each(["$bg","$overlay","$wrapper","$modal"],function(t,n){i[n].off(C+" "+O)}),a())};n.each(["$bg","$overlay","$wrapper","$modal"],function(t,n){i[n].on(C,s).on(O,r)}),t(),0===e(i.$bg)&&0===e(i.$overlay)&&0===e(i.$wrapper)&&0===e(i.$modal)&&(n.each(["$bg","$overlay","$wrapper","$modal"],function(t,n){i[n].off(C+" "+O)}),a())}function d(t){t.state!==E.CLOSED&&(n.each(["$bg","$overlay","$wrapper","$modal"],function(n,e){t[e].off(C+" "+O)}),t.$bg.removeClass(t.settings.modifier),t.$overlay.removeClass(t.settings.modifier).hide(),t.$wrapper.hide(),o(),s(t,E.CLOSED,!0))}function c(t){var n,e,a,i,o={};for(t=t.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,","),n=t.split(","),i=0,e=n.length;i<e;i++)n[i]=n[i].split(":"),a=n[i][1],("string"==typeof a||a instanceof String)&&(a="true"===a||"false"!==a&&a),("string"==typeof a||a instanceof String)&&(a=isNaN(a)?a:+a),o[n[i][0]]=a;return o}function l(){for(var t=v,n=0;n<arguments.length;++n)t+="-"+arguments[n];return t}function m(){var t,e,a=location.hash.replace("#","");if(a){try{e=n("[data-"+h+'-id="'+a+'"]')}catch(t){}e&&e.length&&(t=n[h].lookup[e.data(h)],t&&t.settings.hashTracking&&t.open())}else f&&f.state===E.OPENED&&f.settings.hashTracking&&f.close()}function p(t,e){var a=n(document.forms[0]),i=a,o=this;o.settings=n.extend({},$,e),o.index=n[h].lookup.push(o)-1,o.state=E.CLOSED,o.$overlay=n("."+l("overlay")),null!==o.settings.appendTo&&o.settings.appendTo.length&&(i=n(o.settings.appendTo)),o.$overlay.length||(o.$overlay=n("<div>").addClass(l("overlay")+" "+l("is",E.CLOSED)).hide(),i.append(o.$overlay)),o.$bg=n("."+l("bg")).addClass(l("is",E.CLOSED)),o.$modal=t.addClass(v+" "+l("is-initialized")+" "+o.settings.modifier+" "+l("is",E.CLOSED)).attr("tabindex","-1"),o.$wrapper=n("<div>").addClass(l("wrapper")+" "+o.settings.modifier+" "+l("is",E.CLOSED)).hide().append(o.$modal),i.append(o.$wrapper),o.$wrapper.on("click."+v,"[data-"+h+'-action="close"]',function(t){t.preventDefault(),o.close()}),o.$wrapper.on("click."+v,"[data-"+h+'-action="cancel"]',function(t){t.preventDefault(),o.$modal.trigger(N.CANCELLATION),o.settings.closeOnCancel&&o.close(N.CANCELLATION)}),o.$wrapper.on("click."+v,"[data-"+h+'-action="confirm"]',function(t){t.preventDefault(),o.$modal.trigger(N.CONFIRMATION),o.settings.closeOnConfirm&&o.close(N.CONFIRMATION)}),o.$wrapper.on("click."+v,function(t){var e=n(t.target);e.hasClass(l("wrapper"))&&o.settings.closeOnOutsideClick&&o.close()})}var u,f,g,h="remodal",v=t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.NAMESPACE||h,C=n.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(t){return t+"."+v}).join(" "),O=n.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(t){return t+"."+v}).join(" "),$=n.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:"",appendTo:null},t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.DEFAULTS),E={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"},N={CONFIRMATION:"confirmation",CANCELLATION:"cancellation"},y=(u=document.createElement("div").style,void 0!==u.animationName||void 0!==u.WebkitAnimationName||void 0!==u.MozAnimationName||void 0!==u.msAnimationName||void 0!==u.OAnimationName),w=/iPad|iPhone|iPod/.test(navigator.platform);p.prototype.open=function(){var t,e=this;e.state!==E.OPENING&&e.state!==E.CLOSING&&(t=e.$modal.attr("data-"+h+"-id"),t&&e.settings.hashTracking&&(g=n(window).scrollTop(),location.hash=t),f&&f!==e&&d(f),f=e,i(),e.$bg.addClass(e.settings.modifier),e.$overlay.addClass(e.settings.modifier).show(),e.$wrapper.show().scrollTop(0),e.$modal.focus(),r(function(){s(e,E.OPENING)},function(){s(e,E.OPENED)},e))},p.prototype.close=function(t){var e=this;e.state!==E.OPENING&&e.state!==E.CLOSING&&e.state!==E.CLOSED&&(e.settings.hashTracking&&e.$modal.attr("data-"+h+"-id")===location.hash.substr(1)&&(location.hash="",n(window).scrollTop(g)),r(function(){s(e,E.CLOSING,!1,t)},function(){e.$bg.removeClass(e.settings.modifier),e.$overlay.removeClass(e.settings.modifier).hide(),e.$wrapper.hide(),o(),s(e,E.CLOSED,!1,t)},e))},p.prototype.getState=function(){return this.state},p.prototype.destroy=function(){var t,e=n[h].lookup;d(this),this.$wrapper.remove(),delete e[this.index],t=n.grep(e,function(t){return!!t}).length,0===t&&(this.$overlay.remove(),this.$bg.removeClass(l("is",E.CLOSING)+" "+l("is",E.OPENING)+" "+l("is",E.CLOSED)+" "+l("is",E.OPENED)))},n[h]={lookup:[]},n.fn[h]=function(t){var e,a;return this.each(function(i,o){a=n(o),null==a.data(h)?(e=new p(a,t),a.data(h,e.index),e.settings.hashTracking&&a.attr("data-"+h+"-id")===location.hash.substr(1)&&e.open()):e=n[h].lookup[a.data(h)]}),e},n(document).ready(function(){n(document).on("click","[data-"+h+"-target]",function(t){t.preventDefault();var e=t.currentTarget,a=e.getAttribute("data-"+h+"-target"),i=n("[data-"+h+'-id="'+a+'"]');n[h].lookup[i.data(h)].open()}),n(document).find("."+v).each(function(t,e){var a=n(e),i=a.data(h+"-options");i?("string"==typeof i||i instanceof String)&&(i=c(i)):i={},a[h](i)}),n(document).on("keydown."+v,function(t){f&&f.settings.closeOnEscape&&f.state===E.OPENED&&27===t.keyCode&&f.close()}),n(window).on("hashchange."+v,m)})});