var zakatApp=window.zakatApp=window.zakatApp||{},storage=window.localStorage;(function(n,t,i){n.bindingHandlers.radiochecked={init:function(t,i){setTimeout(function(){var r=n.utils.unwrapObservable(i());r.checked()&&r.selected(t.value);r.selected.subscribe(function(n){r.checked(n===t.value)});n.applyBindingsToNode(t,{checked:r.selected})},0)}};n.forcibleComputed=function(t,i,r){var u=n.observable(),f=n.computed(function(){return u(),t.call(i)},null,r);return f.evaluateImmediate=function(){u.valueHasMutated()},f};i.showTip=function(n,r){t("#"+n).popover({placement:"top",trigger:"manual",html:!0,delay:{show:500,hide:100},content:i.translateText(r)});t("#"+n).popover("show");setTimeout(function(){t("#"+n).popover("hide");t("#"+n).popover("destroy")},2e3)};i.validateNumber=function(n){var r=t(n),u;return r.removeClass("invalid").removeClass("valid"),u=r.val(),i.isNumeric(u)?(r.addClass("valid"),!0):(r.addClass("invalid"),!1)};i.isNumeric=function(n){if(n&&n!=""){var t=i.parseArabic(n);return!isNaN(parseFloat(t))&&isFinite(t)&&parseFloat(t)>0}return!1};i.parseArabic=function(n){return String(n).replace(/٠/g,"0").replace(/١/g,"1").replace(/٢/g,"2").replace(/٣/g,"3").replace(/٤/g,"4").replace(/٥/g,"5").replace(/٦/g,"6").replace(/٧/g,"7").replace(/٨/g,"8").replace(/٩/g,"9")};i.lang=n.observable(document.documentElement.lang||"en");i.translate=function(t){return n.observable(i.translateText(t))};i.translateText=function(n){var t=i.translations[n];return t&&(t=t[i.lang()]),(t||n).trim()};i.langs=[new Language(i.translateText("english"),"en"),new Language(i.translateText("arabic"),"ar")];i.data=[];i.showZakatResult=n.observable(!0);i.toggleShowTotal=function(){i.showZakatResult(!i.showZakatResult())};i.toggleShowTotal=function(){i.showZakatResult(!i.showZakatResult())};i.toggleShowTotalLabel=function(){return i.showZakatResult()?i.translateText("hideSectionTotal"):i.translateText("showSectionTotal")};i.gold24=n.observable(i.gold24Price);i.goldPriceIsValid=n.observable(null);i.gold24.subscribe(function(){var n=i.gold24();i.isNumeric(n)?(i.goldPriceIsValid(!0),i.calculateCash(!0),i.calculateGold24(!0),i.calculateGold22(!0),i.calculateGold21(!0),i.calculateGold18(!0)):i.goldPriceIsValid(!1)},this);i.gold24Nisab=85;i.cashTotalBelowNisab=n.observable(0);i.cashTotal=n.observable(0);i.cashNisab=85;i.cashInput=n.observable();i.cashResult=i.translate("empty");i.cashValidator=n.observable();i.cashIsValid=n.observable(null);i.cashInput.subscribe(function(){i.cashResult(i.translateText("empty"));i.cashValidator("");i.cashTotal(0);i.cashTotalBelowNisab(0);var n=i.cashInput();n.length==0?(i.cashIsValid(null),i.cashResult(i.translateText("empty"))):i.isNumeric(n)?(i.cashIsValid(!0),i.calculateCash(!0)):(i.cashResult(i.translateText("wrongValue")),i.cashIsValid(!1))},this);i.calculateCash=function(n){var t=i.cashInput(),u,f,r;i.isNumeric(t)&&i.isNumeric(i.gold24())?(t=Number(i.parseArabic(t)),u=Number(i.parseArabic(i.gold24())),f=i.cashNisab*u,i.cashTotalBelowNisab(t),t>=f?(r=t/40,i.cashTotal(r.toFixed(3)),i.cashResult(r.toFixed(3)+" "+i.translateText("omr"))):i.Total()>0?i.cashResult(i.translateText("nisabByTotal")):n||(i.cashIsValid(!1),i.cashValidator(i.translateText("nisabError")))):n||i.cashIsValid(!1)};i.cashTotalAmount=n.forcibleComputed(function(){var n=0;return n=i.cashTotal(),n==0?"":Number(n).toFixed(3)+" "+i.translateText("omr")},this);i.gold22Nisab=92.7;i.gold21Nisab=97.1;i.gold18Nisab=113.3;i.goldValidator=n.observable();i.gold24Amount=n.observable(0);i.gold24Gram=n.observable(0);i.goldPrice24IsValid=n.observable(null);i.gold24Input=n.observable();i.gold24IsValid=n.observable(null);i.gold24Result=n.observable(i.translateText("empty"));i.gold24Input.subscribe(function(){i.gold24Result(i.translateText("nisabError"));i.goldValidator("");i.gold24Amount(0);i.gold24Gram(0);var n=i.gold24Input();n.length==0?(i.gold24IsValid(null),i.gold24Result(i.translateText("empty"))):i.isNumeric(n)?(i.gold24IsValid(!0),i.calculateGold24(!0)):(i.gold24Result(i.translateText("wrongValue")),i.gold24IsValid(!1));i.goldTotalAmount.evaluateImmediate()},this);i.calculateGold24=function(n){var t=i.gold24Input(),r,u;i.isNumeric(t)&&i.isNumeric(i.gold24())?(t=Number(i.parseArabic(t)),r=Number(i.parseArabic(i.gold24())),t>=i.gold24Nisab?(u=t*r/40,i.gold24Amount(u),i.gold24Gram(u/r),i.gold24Result(i.gold24Amount().toFixed(3)+" "+i.translateText("omr")+" / "+i.gold24Gram().toFixed(1)+" "+i.translateText("gram"))):i.Total()>0?i.gold24Result(i.translateText("nisabByTotal")):n||(i.gold24IsValid(!1),i.goldValidator(i.translateText("nisabError")))):n||i.gold24IsValid(!1)};i.gold22Amount=n.observable(0);i.gold22Gram=n.observable(0);i.gold22Input=n.observable();i.gold22IsValid=n.observable(null);i.gold22Result=n.observable(i.translateText("empty"));i.gold22Input.subscribe(function(){i.gold22Result(i.translateText("empty"));i.goldValidator("");i.gold22Amount(0);i.gold22Gram(0);var n=i.gold22Input();n.length==0?(i.gold22IsValid(null),i.gold22Result(i.translateText("empty"))):i.isNumeric(n)?(i.gold22IsValid(!0),i.calculateGold22(!0)):(i.gold22Result(i.translateText("wrongValue")),i.gold22IsValid(!1));i.goldTotalAmount.evaluateImmediate()},this);i.calculateGold22=function(n){var t=i.gold22Input(),r,u;i.isNumeric(t)&&i.isNumeric(i.gold24())?(t=Number(i.parseArabic(t)),r=Number(i.parseArabic(i.gold24())),t>=i.gold22Nisab?(u=t*22/24*r/40,i.gold22Amount(u),i.gold22Gram(u/r*24/22),i.gold22Result(i.gold22Amount().toFixed(3)+" "+i.translateText("omr")+" / "+i.gold22Gram().toFixed(1)+" "+i.translateText("gram"))):i.Total()>0?i.gold22Result(i.translateText("nisabByTotal")):n||(i.gold22IsValid(!1),i.goldValidator(i.translateText("nisabError")))):n||i.gold22IsValid(!1)};i.gold21Amount=n.observable(0);i.gold21Gram=n.observable(0);i.gold21Input=n.observable();i.gold21IsValid=n.observable(null);i.gold21Result=n.observable(i.translateText("empty"));i.gold21Input.subscribe(function(){i.gold21Result(i.translateText("nisabError"));i.goldValidator("");i.gold21Amount(0);i.gold21Gram(0);var n=i.gold21Input();n.length==0?(i.gold21IsValid(null),i.gold21Result(i.translateText("empty"))):i.isNumeric(n)?(i.gold21IsValid(!0),i.calculateGold21(!0)):(i.gold21Result(i.translateText("wrongValue")),i.gold21IsValid(!1));i.goldTotalAmount.evaluateImmediate()},this);i.calculateGold21=function(n){var t=i.gold21Input(),r,u;i.isNumeric(t)&&i.isNumeric(i.gold24())?(t=Number(i.parseArabic(t)),r=Number(i.parseArabic(i.gold24())),t>=i.gold21Nisab?(u=t*21/24*r/40,i.gold21Amount(u),i.gold21Gram(u/r*24/21),i.gold21Result(i.gold21Amount().toFixed(3)+" "+i.translateText("omr")+" / "+i.gold21Gram().toFixed(1)+" "+i.translateText("gram"))):i.Total()>0?i.gold21Result(i.translateText("nisabByTotal")):n||(i.gold21IsValid(!1),i.goldValidator(i.translateText("nisabError")))):n||i.gold24IsValid(!1)};i.gold18Amount=n.observable(0);i.gold18Gram=n.observable(0);i.gold18Input=n.observable();i.gold18IsValid=n.observable(null);i.gold18Result=n.observable(i.translateText("empty"));i.gold18Input.subscribe(function(){i.gold18Result(i.translateText("nisabError"));i.goldValidator("");i.gold18Amount(0);i.gold18Gram(0);var n=i.gold18Input();n.length==0?(i.gold18IsValid(null),i.gold18Result(i.translateText("empty"))):i.isNumeric(n)?(i.gold18IsValid(!0),i.calculateGold18(!0)):(i.gold18Result(i.translateText("wrongValue")),i.gold18IsValid(!1));i.goldTotalAmount.evaluateImmediate()},this);i.calculateGold18=function(n){var t=i.gold18Input(),r,u;i.isNumeric(t)&&i.isNumeric(i.gold24())?(t=Number(i.parseArabic(t)),r=Number(i.parseArabic(i.gold24())),t>=i.gold18Nisab?(u=t*18/24*r/40,i.gold18Amount(u),i.gold18Gram(u/r*24/18),i.gold18Result(i.gold18Amount().toFixed(3)+" "+i.translateText("omr")+" / "+i.gold18Gram().toFixed(1)+" "+i.translateText("gram"))):i.Total()>0?i.gold18Result(i.translateText("nisabByTotal")):n||(i.gold18IsValid(!1),i.gold18Result(i.translateText("nisabError")))):n||i.gold18IsValid(!1)};i.goldTotalBelowNisab=n.observable(0);i.goldTotal=n.observable(0);i.goldTotalAmount=n.forcibleComputed(function(){var t,r;i.goldTotalBelowNisab(0);var n=Number(i.parseArabic(i.gold24())),u=0,f=0,e=0,o=0;return i.isNumeric(i.gold24Input())&&(u=Number(i.parseArabic(i.gold24Input()))*n),i.isNumeric(i.gold22Input())&&(f=Number(i.parseArabic(i.gold22Input()))*22/24*n),i.isNumeric(i.gold21Input())&&(e=Number(i.parseArabic(i.gold21Input()))*21/24*n),i.isNumeric(i.gold18Input())&&(o=Number(i.parseArabic(i.gold18Input()))*18/24*n),t=u+f+e+o,r=(u+f+e+o)/40,i.goldTotalBelowNisab(t),t>=i.gold24Nisab*n?(i.goldTotal(r.toFixed(3)),r.toFixed(3)+" "+i.translateText("omr")+" / "+Number((r/n).toFixed(1))+" "+i.translateText("gram")):i.Total&&i.Total()>0?i.translateText("nisabByTotal"):t>0?"":""},this);i.silverTotalBelowNisab=n.observable(0);i.silverTotal=n.observable(0);i.silverNisab=595;i.silver=n.observable(i.silverPrice);i.silverPriceIsValid=n.observable(null);i.silver.subscribe(function(){var n=i.silver();i.isNumeric(n)?(i.silverPriceIsValid(!0),i.calculateSilver(!0)):i.silverPriceIsValid(!1)},this);i.silverInput=n.observable();i.silverResult=i.translate("empty");i.silverValidator=n.observable();i.silverIsValid=n.observable(null);i.silverInput.subscribe(function(){i.silverResult(i.translateText("nisabError"));i.silverValidator("");i.silverTotal(0);i.silverTotalBelowNisab(0);var n=i.silverInput();n.length==0?(i.silverIsValid(null),i.silverResult(i.translateText("empty"))):i.isNumeric(n)?(i.silverIsValid(!0),i.calculateSilver(!0)):(i.silverIsValid(!1),i.silverResult(i.translateText("wrongValue")))},this);i.calculateSilver=function(n){var t=i.silverInput();if(i.isNumeric(t)&&i.isNumeric(i.silver())){t=Number(i.parseArabic(t));var u=Number(i.parseArabic(i.silver())),f=i.silverNisab,e=Number(i.parseArabic(i.gold24())),r=t*u;i.silverTotalBelowNisab(t/7*e);t>=f?(r=r/40,i.silverTotal(r.toFixed(3)),i.silverResult(r.toFixed(3)+" "+i.translateText("omr")+" / "+(r/u).toFixed(1)+" "+i.translateText("gram"))):i.Total&&i.Total()>0?i.silverResult(i.translateText("nisabByTotal")):n||(i.silverIsValid(!1),i.silverValidator(i.translateText("nisabError")))}else i.silverIsValid(!1)};i.silverTotalAmount=n.forcibleComputed(function(){var n=0;return n=i.silverTotal(),n==0?"":Number(n).toFixed(3)+" "+i.translateText("omr")},this);i.tradeTotalBelowNisab=n.observable(0);i.tradeTotal=n.observable(0);i.tradeTotalAmount=n.observable();i.trades=n.observableArray([]);i.tradeResult=n.forcibleComputed(function(){i.tradeTotalBelowNisab(0);i.tradeTotal(0);i.tradeTotalAmount("");var u=Number(i.parseArabic(i.gold24()))*i.tradeNisab,t=0,r=0;return(n.utils.arrayForEach(i.trades(),function(n){t=Number(t)+Number(n.zakatValue);r=Number(r)+Number(n.value)}),i.tradeTotalBelowNisab(r),r>=u)?(i.tradeTotal(Number(t).toFixed(3)),i.tradeTotalAmount(t==0?"":Number(t).toFixed(3)+" "+i.translateText("omr")),Number(t).toFixed(3)+" "+i.translateText("omr")):i.Total&&i.Total()>0?i.translateText("nisabByTotal"):r>=0?i.translateText("empty"):void 0},this);i.tradeNisab=85;i.tradeName=n.observable();i.tradeName.subscribe(function(){i.tradeName()!=null&&i.validateTradeName()},this);i.tradeValue=n.observable();i.tradeValue.subscribe(function(){i.tradeValue()!=null&&i.validateTradeValue()},this);i.tradeNameIsValid=n.observable(null);i.tradeValueIsValid=n.observable(null);i.validateTradeName=function(){i.tradeName()&&i.tradeName().length>0?i.tradeNameIsValid(!0):(i.tradeNameIsValid(!1),i.showTip("tradeName","required"))};i.validateTradeValue=function(){var n=i.tradeValue();i.isNumeric(n)?i.tradeValueIsValid(!0):(i.tradeValueIsValid(!1),i.showTip("tradeValue","wrongValue"))};i.removeTrade=function(r){var u=undefined,f;t.each(i.trades(),function(n,t){if(parseInt(t.counter())==parseInt(r)){u=t;return}});u&&(i.trades.remove(u),f=1,n.utils.arrayForEach(i.trades(),function(n){n.counter(f++)}))};i.addTrade=function(){var r;if(i.validateTradeValue(),i.tradeValueIsValid()){var u=Number(i.parseArabic(i.gold24()))*i.tradeNisab,t=Number(i.parseArabic(i.tradeValue())),f={counter:n.observable(0),name:i.tradeName(),value:i.tradeValue(),zakatResult:t>=u?(t/40).toFixed(3):i.translateText("nisabError"),zakatValue:(t/40).toFixed(3)};i.trades.push(f);r=1;n.utils.arrayForEach(i.trades(),function(n){n.counter(r++)});i.tradeName(null);i.tradeValue(null);i.tradeNameIsValid(null);i.tradeValueIsValid(null);i.tradeResult.evaluateImmediate()}};i.shareTotalBelowNisab=n.observable(0);i.shareTotal=n.observable(0);i.shareTotalAmount=n.observable();i.shares=n.observableArray([]);i.shareResult=n.forcibleComputed(function(){i.shareTotalBelowNisab(0);i.shareTotal(0);i.shareTotalAmount("");var u=Number(i.parseArabic(i.gold24()))*i.shareNisab,t=0,r=0;return(n.utils.arrayForEach(i.shares(),function(n){t=Number(t)+Number(n.zakatValue);r=Number(r)+Number(n.value)*Number(n.count)}),i.shareTotalBelowNisab(r),r>=u)?(i.shareTotal(Number(t).toFixed(3)),i.shareTotalAmount(t==0?"":Number(t).toFixed(3)+" "+i.translateText("omr")),Number(t).toFixed(3)+" "+i.translateText("omr")):i.Total&&i.Total()>0?i.translateText("nisabByTotal"):r>=0?i.translateText("empty"):void 0},this);i.shareNisab=85;i.shareName=n.observable();i.shareName.subscribe(function(){i.shareName()!=null&&i.validateShareName()},this);i.shareCount=n.observable();i.shareCount.subscribe(function(){i.shareCount()!=null&&i.validateShareCount()},this);i.shareValue=n.observable();i.shareValue.subscribe(function(){i.shareValue()!=null&&i.validateShareValue()},this);i.shareNameIsValid=n.observable(null);i.shareCountIsValid=n.observable(null);i.shareValueIsValid=n.observable(null);i.validateShareName=function(){i.shareName()&&i.shareName().length>0?i.shareNameIsValid(!0):(i.shareNameIsValid(!1),i.showTip("shareName","required"))};i.validateShareCount=function(){var n=i.shareCount();i.isNumeric(n)?i.shareCountIsValid(!0):(i.shareCountIsValid(!1),i.showTip("shareCount","wrongValue"))};i.validateShareValue=function(){var n=i.shareValue();i.isNumeric(n)?i.shareValueIsValid(!0):(i.shareValueIsValid(!1),i.showTip("shareValue","wrongValue"))};i.removeShare=function(r){var u=undefined,f;t.each(i.shares(),function(n,t){if(parseInt(t.counter())==parseInt(r)){u=t;return}});u&&(i.shares.remove(u),f=1,n.utils.arrayForEach(i.shares(),function(n){n.counter(f++)}))};i.addShare=function(){var r;if(i.validateShareName(),i.validateShareCount(),i.validateShareValue(),i.shareNameIsValid()&&i.shareCountIsValid()&&i.shareValueIsValid()){var u=Number(i.parseArabic(i.gold24()))*i.shareNisab,t=Number(i.parseArabic(i.shareValue()))*Number(i.parseArabic(i.shareCount())),f={counter:n.observable(0),name:i.shareName(),count:i.shareCount(),value:i.shareValue(),zakatResult:t>=u?(t/40).toFixed(3):i.translateText("nisabError"),zakatValue:(t/40).toFixed(3)};i.shares.push(f);r=1;n.utils.arrayForEach(i.shares(),function(n){n.counter(r++)});i.shareName(null);i.shareCount(null);i.shareValue(null);i.shareNameIsValid(null);i.shareCountIsValid(null);i.shareValueIsValid(null);i.shareResult.evaluateImmediate()}};i.allowAmountPerKG=n.observable(i.allowPricePerKG=="true"?!0:!1);i.plantTotal=n.observable(0);i.plantTotalAmount=n.observable();i.plants=n.observableArray([]);i.plantResult=n.forcibleComputed(function(){i.plantTotal(0);i.plantTotalAmount("");var r=0,t=0;return n.utils.arrayForEach(i.plants(),function(n){r=Number(r)+Number(n.zakatValue);t=Number(t)+Number(n.zakatValue)*n.value}),i.plantTotal(Number(t).toFixed(3)),i.plantTotalAmount(t==0?"":Number(t).toFixed(3)+" "+i.translateText("omr")),r==0?i.translateText("empty"):t==0?"":Number(t).toFixed(3)+" "+i.translateText("omr")},this);i.plantNisab=n.observable(615);i.zakatRateWithMachine=5;i.zakatRateWithoutMachine=10;i.plantName=n.observable();i.plantName.subscribe(function(){i.plantName()!=null&&i.validatePlantName()},this);i.plantWeight=n.observable();i.plantWeight.subscribe(function(){i.plantWeight()!=null&&i.validatePlantWeight()},this);i.plantValue=n.observable();i.plantValue.subscribe(function(){i.plantValue()!=null&&i.validatePlantValue()},this);i.plantType=n.observable("with");i.plantType.subscribe(function(){i.validatePlantType()},this);i.plantNameIsValid=n.observable(null);i.plantWeightIsValid=n.observable(null);i.plantValueIsValid=n.observable(null);i.plantTypeIsValid=n.observable(null);i.validatePlantName=function(){i.plantName()&&i.plantName().length>0?i.plantNameIsValid(!0):(i.plantNameIsValid(!1),i.showTip("plantName","required"))};i.validatePlantWeight=function(){var n=i.plantWeight();i.isNumeric(n)?i.plantWeightIsValid(!0):(i.plantWeightIsValid(!1),i.showTip("plantWeight","wrongValue"))};i.validatePlantValue=function(){if(i.allowAmountPerKG()==!1){i.plantValueIsValid(!0);return}var n=i.plantValue();i.isNumeric(n)?i.plantValueIsValid(!0):(i.plantValueIsValid(!1),i.showTip("plantValue","wrongValue"))};i.validatePlantType=function(){i.plantType()&&i.plantType().length>0&&(i.plantType()=="with"||i.plantType()=="without")?i.plantTypeIsValid(!0):i.plantTypeIsValid(!1)};i.removePlant=function(r){var u=undefined,f;t.each(i.plants(),function(n,t){if(parseInt(t.counter())==parseInt(r)){u=t;return}});u&&(i.plants.remove(u),f=1,n.utils.arrayForEach(i.plants(),function(n){n.counter(f++)}))};i.addPlant=function(){var u,t,r,f,e;i.validatePlantName();i.validatePlantWeight();i.validatePlantValue();i.validatePlantType();i.plantNameIsValid()&&i.plantWeightIsValid()&&i.plantValueIsValid()&&(u=Number(i.plantNisab()),t=Number(i.parseArabic(i.plantWeight())),t>=u?(r=i.plantType()=="with"?i.zakatRateWithMachine:i.zakatRateWithoutMachine,f={counter:n.observable(0),name:i.plantName(),weight:i.parseArabic(i.plantWeight()),type:i.plantType()=="with"?i.translateText("headerPlantsWithMachine"):i.translateText("headerPlantsWithoutMachine"),value:i.allowAmountPerKG()?i.parseArabic(i.plantValue()):0,zakatValue:(t*Number(r)/100).toFixed(3),equivalentKilogram:i.allowAmountPerKG()?(t*Number(r)/100*i.parseArabic(i.plantValue())).toFixed(3):t},i.plants.push(f),e=1,n.utils.arrayForEach(i.plants(),function(n){n.counter(e++)}),i.plantName(null),i.plantWeight(null),i.plantValue(null),i.plantNameIsValid(null),i.plantWeightIsValid(null),i.plantValueIsValid(null),i.plantResult.evaluateImmediate()):(i.plantWeightIsValid(!1),i.showTip("plantWeight","nisabError")))};i.cattle=n.observableArray([]);i.ccNisab=n.observable(5);i.sgNisab=n.observable(40);i.allowAmountForCattle=n.observable(i.allowCashForCattle=="true"?!0:!1);i.cattleTotal=n.observable(0);i.cattleTotalAmount=n.forcibleComputed(function(){var n=0;return n=i.cattleTotal(),n==0?"":Number(n).toFixed(3)+" "+i.translateText("omr")},this);i.zakatCattleRange=[{type:"sheep",min:301,max:-1,isMaxLimit:!0,zakat:[{set:100,en:"الشاة",ar:"الشاة"}]},{type:"sheep",min:201,max:300,en:"ثلاث شياة",ar:"ثلاث شياة"},{type:"sheep",min:121,max:200,en:"شاتان",ar:"شاتان"},{type:"sheep",min:40,max:120,en:"شاة واحدة",ar:"شاة واحدة"},{type:"camel",min:121,max:-1,isMaxLimit:!0,zakat:[{set:40,en:"بنت لبون",ar:"بنت لبون",desc:{en:"بنت سنتين",ar:"بنت سنتين"}},{set:50,en:"حقة",ar:"حقة",desc:{en:"بنت ثلاث سنوات",ar:"بنت ثلاث سنوات"}}]},{type:"camel",min:91,max:129,en:"حقتان",ar:"حقتان",desc:{en:"",ar:""}},{type:"camel",min:76,max:90,en:"بنتا لبون",ar:"بنتا لبون",desc:{en:"",ar:""}},{type:"camel",min:61,max:75,en:"جذعة",ar:"جذعة",desc:{en:"بنت أربع سنوات",ar:"بنت أربع سنوات"}},{type:"camel",min:46,max:60,en:"حقة",ar:"حقة",desc:{en:"بنت ثلاث سنوات",ar:"بنت ثلاث سنوات"}},{type:"camel",min:36,max:45,en:"بنت لبون",ar:"بنت لبون",desc:{en:"بنت سنتين",ar:"بنت سنتين"}},{type:"camel",min:25,max:35,en:"بنت مخاض",ar:"بنت مخاض",desc:{en:"بنت سنة واحدة",ar:"بنت سنة واحدة"}},{type:"camel",min:20,max:24,en:"أربع شياة",ar:"أربع شياة",desc:{en:"",ar:""}},{type:"camel",min:15,max:19,en:"ثلاث شياة",ar:"ثلاث شياة",desc:{en:"",ar:""}},{type:"camel",min:10,max:14,en:"شاتان",ar:"شاتان",desc:{en:"",ar:""}},{type:"camel",min:5,max:9,en:"شاة واحدة",ar:"شاة واحدة",desc:{en:"عمرها سنة من الماعز أو 6 أشهر من الضان",ar:"عمرها سنة من الماعز أو 6 أشهر من الضان"}},{type:"cow",min:121,max:-1,isMaxLimit:!0,zakat:[{set:40,en:"ثنية",ar:"ثنية",desc:{en:"بنت سنتين",ar:"بنت سنتين"}},{set:50,en:"رباعية",ar:"رباعية",desc:{en:"بنت ثلاث سنوات",ar:"بنت ثلاث سنوات"}}]},{type:"cow",min:91,max:120,en:"رباعيتان",ar:"رباعيتان",desc:{en:"",ar:""}},{type:"cow",min:76,max:90,en:"ثنيتان",ar:"ثنيتان",desc:{en:"",ar:""}},{type:"cow",min:61,max:75,en:"سديس",ar:"سديس",desc:{en:"بنت أربع سنوات",ar:"بنت أربع سنوات"}},{type:"cow",min:46,max:60,en:"رباعية",ar:"رباعية",desc:{en:"بنت ثلاث سنوات",ar:"بنت ثلاث سنوات"}},{type:"cow",min:36,max:45,en:"ثنية",ar:"ثنية",desc:{en:"بنت سنتين",ar:"بنت سنتين"}},{type:"cow",min:25,max:35,en:"جذعة",ar:"جذعة",desc:{en:"بنت سنة واحدة",ar:"بنت سنة واحدة"}},{type:"cow",min:20,max:24,en:"أربع شياة",ar:"أربع شياة",desc:{en:"",ar:""}},{type:"cow",min:15,max:19,en:"ثلاث شياة",ar:"ثلاث شياة",desc:{en:"",ar:""}},{type:"cow",min:10,max:14,en:"شاتان",ar:"شاتان",desc:{en:"",ar:""}},{type:"cow",min:5,max:9,en:"شاة واحدة",ar:"شاة واحدة",desc:{en:"عمرها سنة من الماعز أو 6 أشهر من الضان",ar:"عمرها سنة من الماعز أو 6 أشهر من الضان"}},];i.cattleCount=n.observable();i.cattleCount.subscribe(function(){i.cattleCount()!=null&&i.validateCattleCount()},this);i.cattleValue=n.observable();i.cattleValue.subscribe(function(){i.validateCattleValue()},this);i.cattleType=n.observable("sheep");i.cattleType.subscribe(function(){i.validateCattleType()},this);i.cattleCountIsValid=n.observable(null);i.cattleValueIsValid=n.observable(null);i.cattleTypeIsValid=n.observable(null);i.validateCattleCount=function(){var n=i.cattleCount();i.isNumeric(n)?i.cattleCountIsValid(!0):(i.cattleCountIsValid(!1),i.showTip("cattleCount","wrongValue"))};i.validateCattleValue=function(){var n=i.cattleValue();i.isNumeric(n)?i.cattleValueIsValid(!0):i.cattleValueIsValid(!1)};i.validateCattleType=function(){i.cattleType()&&i.cattleType().length>0&&(i.cattleType()=="sheep"||i.cattleType()=="camel"||i.cattleType()=="cow")?i.cattleTypeIsValid(!0):i.cattleTypeIsValid(!1)};i.calcCattleTotal=function(){i.cattleTotal(0);n.utils.arrayForEach(i.cattle(),function(n){i.isNumeric(n.zakatAmount())&&i.cattleTotal(i.cattleTotal()+Number(i.parseArabic(n.zakatAmount())))});i.cattleTotalAmount.evaluateImmediate()};i.acceptCattle=function(r){var f={counter:r.counter,name:r.name,count:r.count,zakatValue:r.zakatValue,zakatDesc:r.zakatDesc,zakatAmount:n.observable(r.zakatAmount),modulo:r.modulo},u;i.cattle.push(f);u=1;n.utils.arrayForEach(i.cattle(),function(n){n.counter(u++);n.zakatAmount.subscribe(function(){i.calcCattleTotal()},this)});i.cattleCount(null);i.cattleValueIsValid(null);i.cattleCountIsValid(null);i.cattleModal([]);t("#cattleModal").modal("hide")};i.removeCattle=function(r){var u=undefined,f;t.each(i.cattle(),function(n,t){if(parseInt(t.counter())==parseInt(r)){u=t;return}});u&&(i.cattle.remove(u),f=1,n.utils.arrayForEach(i.cattle(),function(n){n.counter(f++)}),i.calcCattleTotal())};i.cattleModal=n.observableArray([]);i.addCattle=function(){var l,f,h,e,c,o,r,u,a;if(i.validateCattleCount(),i.validateCattleType(),i.cattleCountIsValid()&&i.cattleTypeIsValid()){var v=Number(i.ccNisab()),y=Number(i.sgNisab()),s=i.cattleType(),e=Number(i.parseArabic(i.cattleCount()));if((s=="camel"||s=="cow")&&e>=v||s=="sheep"&&e>=y){for(l=e,f=undefined,h=0;h<i.zakatCattleRange.length;h++)if(e=i.zakatCattleRange[h],e.type==s&&l>=e.min){f=e;break}if(f){if(c=i.translateText(f.type),f.isMaxLimit!=undefined)o=[],t.each(f.zakat,function(t,r){var u=Number(i.cattleCount()).roundTenth(),f=u%r.set,e=Math.floor(u/r.set),s=i.translateText("count")+" ["+e+"] "+i.translateText("from")+" ["+r[i.lang()]+"]",h=r.desc!=undefined?r.desc[i.lang()]:"",l={counter:n.observable(0),name:c,count:i.parseArabic(i.cattleCount()),zakatValue:s,zakatDesc:h,zakatAmount:n.observable(),modulo:f};o.push(l)}),r=undefined,u=undefined,o[0]&&(r=o[0]),o[1]&&(u=o[1]),r&&u&&(r.modulo==0&&u.modulo==0||r.modulo>0&&u.modulo>0)?(i.cattleModal([]),i.cattleModal.push(r),i.cattleModal.push(u),t("#cattleModal").modal()):r&&u&&r.modulo==0&&u.modulo>0?i.cattle.push(r):r&&u&&r.modulo>0&&u.modulo==0?i.cattle.push(u):r&&i.cattle.push(r);else{var p=f[i.lang()],w=f.desc!=undefined?f.desc[i.lang()]:"",b={counter:n.observable(0),name:c,count:i.parseArabic(i.cattleCount()),zakatValue:p,zakatDesc:w,zakatAmount:n.observable()};i.cattle.push(b)}a=1;n.utils.arrayForEach(i.cattle(),function(n){n.counter(a++);n.zakatAmount.subscribe(function(){i.calcCattleTotal()},this)});i.cattleCount(null);i.cattleValueIsValid(null);i.cattleCountIsValid(null)}}else i.cattleCountIsValid(!1),i.showTip("cattleCount","nisabError")}};i.calcTotal=function(){var t=0,u=Number(i.parseArabic(i.gold24())),f=i.cashNisab*u,n=Number(i.cashTotalBelowNisab())+Number(i.goldTotalBelowNisab())+Number(i.silverTotalBelowNisab())+Number(i.tradeTotalBelowNisab())+Number(i.shareTotalBelowNisab()),r=Number(i.plantTotal())+Number(i.cattleTotal());if(n>=f){if(i.silverTotalBelowNisab()>0){var e=Number(i.parseArabic(i.silverInput())),o=Number(i.parseArabic(i.silver())),s=e*o;n=n-i.silverTotalBelowNisab()+s}return t=n/40+r,Number(t).toFixed(3)}return r.toFixed(3)};i.Total=n.forcibleComputed(function(){return i.calcTotal()},this);i.TotalLabel=n.forcibleComputed(function(){var n=i.calcTotal();return n>0?Number(n).toFixed(3)+" "+i.translateText("omr"):""},this);i.loadCached=function(){var u=storage.getItem("zakatApp")||"",r,f,e,o,s;u&&u.length>0&&(r=JSON.parse(u),i.cashInput(r.cashInput),i.gold24Input(r.gold24Input),i.gold22Input(r.gold22Input),i.gold21Input(r.gold21Input),i.gold18Input(r.gold18Input),i.silverInput(r.silverInput),f=JSON.parse(r.trades),t.each(f,function(t,r){var u={counter:n.observable(r.counter),name:r.name,value:r.value,zakatValue:r.zakatValue,zakatResult:r.zakatResult};i.trades.push(u)}),i.tradeResult.evaluateImmediate(),e=JSON.parse(r.shares),t.each(e,function(t,r){var u={counter:n.observable(r.counter),name:r.name,count:r.count,value:r.value,zakatValue:r.zakatValue,zakatResult:r.zakatResult};i.shares.push(u)}),i.shareResult.evaluateImmediate(),o=JSON.parse(r.plants),t.each(o,function(t,r){var u={counter:n.observable(r.counter),name:r.name,weight:r.weight,type:r.type,value:r.value,zakatValue:r.zakatValue,equivalentKilogram:r.equivalentKilogram};i.plants.push(u)}),i.plantResult.evaluateImmediate(),s=JSON.parse(r.cattle),t.each(s,function(t,r){var u={counter:n.observable(r.counter),name:r.name,count:r.count,zakatValue:r.zakatValue,zakatDesc:r.zakatDesc,zakatAmount:n.observable(r.zakatAmount)};i.cattle.push(u)}),i.calcCattleTotal(),n.utils.arrayForEach(i.cattle(),function(n){n.zakatAmount.subscribe(function(){i.calcCattleTotal()},this)}))};i.clearZakat=function(){i.cashInput("");i.gold24Input("");i.gold22Input("");i.gold21Input("");i.gold18Input("");i.silverInput("");i.trades([]);i.shares([]);i.plants([]);i.cattle([]);i.calcCattleTotal();storage.removeItem("zakatApp")};i.saveZakat=function(){return storage.setItem("zakatApp",n.toJSON({cashInput:i.cashInput(),gold24Input:i.gold24Input(),gold22Input:i.gold22Input(),gold21Input:i.gold21Input(),gold18Input:i.gold18Input(),silverInput:i.silverInput(),trades:n.toJSON(i.trades()),shares:n.toJSON(i.shares()),plants:n.toJSON(i.plants()),cattle:n.toJSON(i.cattle())})),!0};i.initialize=function(){i.bindEvents();t("html").attr("lang",i.lang());t("html").attr("dir",i.lang()=="ar"?"rtl":"ltr");i.loadCached()};i.changeLanguage=function(){lang=i.lang()=="en"?"ar":"en";i.lang(lang);storage.setItem("lang",lang);t("html").attr("lang",lang);t("html").attr("dir",i.lang()=="ar"?"rtl":"ltr")};i.bindEvents=function(){n.applyBindings(i,document.getElementById("zakat"))}})(ko,jQuery,zakatApp);zakatApp.initialize();Number.prototype.round=function(n){return+(Math.round(this+"e+"+n)+"e-"+n)};Number.prototype.roundTenth=function(){return parseInt(this/10,10)*10};Number.prototype.roundToSig=function(n){if(n===0)return 0;var i=new String(n).length-1,t=Math.pow(10,i-Math.floor(Math.log(n<0?-n:n)/Math.LN10)-1);return Math.floor(n*t)/t};